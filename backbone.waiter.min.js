/*
    backbone.waiter
    
    Notice*
    The majority of the code below was cherry picked from backbone.Marionette v2.4
    https://github.com/marionettejs/backbone.marionette
 */
 
(function(e,f){if("function"===typeof define&&define.amd)define(["backbone","underscore","jquery"],function(a,d,b){return f(e,a,d,b)});else if("undefined"!==typeof exports){var b=require("underscore"),h=require("jquery"),c=require("backbone");module.exports=f(e,c,b,h)}else e.Waiter=e.Backbone.Waiter=f(e,e.Backbone,e._,e.jQuery)})(this,function(e,f,b,h){var c={};c.extend=f.Model.extend;c.isNodeAttached=function(a){return f.$.contains(document.documentElement,a)};c.mergeOptions=function(a,d){a&&b.extend(this,
    b.pick(a,d))};c.getOption=function(a,d){if(a&&d)return a.options&&void 0!==a.options[d]?a.options[d]:a[d]};c.proxyGetOption=function(a){return c.getOption(this,a)};c._getValue=function(a,d,c){b.isFunction(a)&&(a=c?a.apply(d,c):a.call(d));return a};c.normalizeMethods=function(a){return b.reduce(a,function(a,c,g){b.isFunction(c)||(c=this[c]);c&&(a[g]=c);return a},{},this)};c.normalizeUIString=function(a,d){return a.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(a){return d[a.slice(4)]})};c.normalizeUIKeys=
    function(a,d){return b.reduce(a,function(a,b,e){e=c.normalizeUIString(e,d);a[e]=b;return a},{})};c.normalizeUIValues=function(a,d,e){b.each(a,function(g,f){b.isString(g)?a[f]=c.normalizeUIString(g,d):b.isObject(g)&&b.isArray(e)&&(b.extend(g,c.normalizeUIValues(b.pick(g,e),d)),b.each(e,function(a){var e=g[a];b.isString(e)&&(g[a]=c.normalizeUIString(e,d))}))});return a};c.BaseView=f.View.extend({isDestroyed:!1,constructor:function(a){this.render=b.bind(this.render,this);a=c._getValue(a,this);this.options=
    b.extend({},b.result(this,"options"),a);f.View.call(this,this.options)},normalizeUIKeys:function(a){var d=b.result(this,"_uiBindings");return c.normalizeUIKeys(a,d||b.result(this,"ui"))},normalizeUIValues:function(a,d){var e=b.result(this,"ui"),f=b.result(this,"_uiBindings");return c.normalizeUIValues(a,f||e,d)},bindUIElements:function(){this._bindUIElements()},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=b.result(this,"_uiBindings");this.ui={};b.each(a,
    function(a,b){this.ui[b]=this.$(a)},this)}},unbindUIElements:function(){this._unbindUIElements()},_unbindUIElements:function(){this.ui&&this._uiBindings&&(b.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},delegateEvents:function(a){this._delegateDOMEvents(a);return this},_delegateDOMEvents:function(a){var d=c._getValue(a||this.events,this);d=this.normalizeUIKeys(d);b.isUndefined(a)&&(this.events=d);a={};b.extend(a,d);f.View.prototype.delegateEvents.call(this,
    a)},destroy:function(){if(this.isDestroyed)return this;b.toArray(arguments);this.isDestroyed=!0;this.unbindUIElements();this.isRendered=!1;this.remove();return this},onRender:function(){},render:function(){this.isRendered=!0;this.bindUIElements();this.onRender();return this}});c.AutoLoader=function(a,b){if(a){var c=new a(b);0<h(c.el).length&&c.render()}};return c});