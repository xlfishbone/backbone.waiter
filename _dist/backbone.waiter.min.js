/*
    backbone.waiter
    
    Notice*
    The majority of the code below was cherry picked from backbone.Marionette v2.4
    https://github.com/marionettejs/backbone.marionette
 */
 
(function(e,f){if("function"===typeof define&&define.amd)define(["backbone","underscore","jquery"],function(a,d,c){return f(e,a,d,c)});else if("undefined"!==typeof exports){var c=require("underscore"),h=require("jquery"),b=require("backbone");module.exports=f(e,b,c,h)}else e.Waiter=e.Backbone.Waiter=f(e,e.Backbone,e._,e.jQuery)})(this,function(e,f,c,h){var b={};b.extend=f.Model.extend;b.isNodeAttached=function(a){return f.$.contains(document.documentElement,a)};b.mergeOptions=function(a,d){a&&c.extend(this,
c.pick(a,d))};b.getOption=function(a,d){if(a&&d)return a.options&&void 0!==a.options[d]?a.options[d]:a[d]};b.proxyGetOption=function(a){return b.getOption(this,a)};b._getValue=function(a,d,b){c.isFunction(a)&&(a=b?a.apply(d,b):a.call(d));return a};b.normalizeMethods=function(a){return c.reduce(a,function(a,b,g){c.isFunction(b)||(b=this[b]);b&&(a[g]=b);return a},{},this)};b.normalizeUIString=function(a,b){return a.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(a){return b[a.slice(4)]})};b.normalizeUIKeys=
function(a,d){return c.reduce(a,function(a,c,e){e=b.normalizeUIString(e,d);a[e]=c;return a},{})};b.normalizeUIValues=function(a,d,e){c.each(a,function(g,f){c.isString(g)?a[f]=b.normalizeUIString(g,d):c.isObject(g)&&c.isArray(e)&&(c.extend(g,b.normalizeUIValues(c.pick(g,e),d)),c.each(e,function(a){var e=g[a];c.isString(e)&&(g[a]=b.normalizeUIString(e,d))}))});return a};b.BaseView=f.View.extend({isDestroyed:!1,constructor:function(a){this.render=c.bind(this.render,this);a=b._getValue(a,this);this.options=
c.extend({},c.result(this,"options"),a);f.View.call(this,this.options)},normalizeUIKeys:function(a){var d=c.result(this,"_uiBindings");return b.normalizeUIKeys(a,d||c.result(this,"ui"))},normalizeUIValues:function(a,d){var e=c.result(this,"ui"),f=c.result(this,"_uiBindings");return b.normalizeUIValues(a,f||e,d)},bindUIElements:function(){this._bindUIElements()},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={};c.each(a,
function(a,b){this.ui[b]=this.$(a)},this)}},unbindUIElements:function(){this._unbindUIElements()},_unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},delegateEvents:function(a){this._delegateDOMEvents(a);return this},_delegateDOMEvents:function(a){var d=b._getValue(a||this.events,this),d=this.normalizeUIKeys(d);c.isUndefined(a)&&(this.events=d);a={};c.extend(a,d);f.View.prototype.delegateEvents.call(this,
a)},destroy:function(){if(this.isDestroyed)return this;c.toArray(arguments);this.isDestroyed=!0;this.unbindUIElements();this.isRendered=!1;this.remove();return this},onRender:function(){},render:function(){this.isRendered=!0;this.bindUIElements();this.onRender();return this}});return b});
