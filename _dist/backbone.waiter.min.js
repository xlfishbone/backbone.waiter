!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("_"),require("$")):"function"==typeof define&&define.amd?define("Waiter",["_","$"],e):"object"==typeof exports?exports.Waiter=e(require("_"),require("$")):t.Waiter=e(t._,t.$)}(this,function(t,e){return function(t){function e(i){if(n[i])return n[i].exports;var u=n[i]={i:i,l:!1,exports:{}};return t[i].call(u.exports,u,u.exports,e),u.l=!0,u.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(u),s=/\s+/,l=function(t,e,n,u,o){var a=0,f=void 0;if(n&&"object"===(void 0===n?"undefined":i(n))){void 0!==u&&"context"in o&&void 0===o.context&&(o.context=u);for(f=r.default.keys(n);a<f.length;a++)e=l(t,e,f[a],n[f[a]],o)}else if(n&&s.test(n))for(f=n.split(s);a<f.length;a++)e=t(e,f[a],u,o);else e=t(e,n,u,o);return e},o=function(t,e,n,i,u){if(t._events=l(a,t._events||{},e,n,{context:i,ctx:t,listening:u}),u){(t._listeners||(t._listeners={}))[u.id]=u}return t},a=function(t,e,n,i){if(n){var u=t[e]||(t[e]=[]),r=i.context,s=i.ctx,l=i.listening;l&&l.count++,u.push({callback:n,context:r,ctx:r||s,listening:l})}return t},f=function(t,e,n,i){if(t){var u=0,s=void 0,l=i.context,o=i.listeners;if(e||n||l){for(var a=e?[e]:r.default.keys(t);u<a.length;u++){e=a[u];var f=t[e];if(!f)break;for(var d=[],c=0;c<f.length;c++){var h=f[c];n&&n!==h.callback&&n!==h.callback._callback||l&&l!==h.context?d.push(h):(s=h.listening)&&0==--s.count&&(delete o[s.id],delete s.listeningTo[s.objId])}d.length?t[e]=d:delete t[e]}return t}for(var v=r.default.keys(o);u<v.length;u++)s=o[v[u]],delete o[s.id],delete s.listeningTo[s.objId]}},d=function(t,e,n,i){if(n){var u=t[e]=r.default.once(function(){i(e,u),n.apply(this,arguments)});u._callback=n}return t},c=function(t,e,n,i){if(t){var u=t[e],r=t.all;u&&r&&(r=r.slice()),u&&h(u,i),r&&h(r,[e].concat(i))}return t},h=function(t,e){var n=void 0,i=-1,u=t.length,r=e[0],s=e[1],l=e[2];switch(e.length){case 0:for(;++i<u;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<u;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<u;)(n=t[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<u;)(n=t[i]).callback.call(n.ctx,r,s,l);return;default:for(;++i<u;)(n=t[i]).callback.apply(n.ctx,e);return}};e.default={on:function(t,e,n){return o(this,t,e,n)},listenTo:function(t,e,n){if(!t)return this;var i=t._listenId||(t._listenId=r.default.uniqueId("l")),u=this._listeningTo||(this._listeningTo={}),s=u[i];if(!s){var l=this._listenId||(this._listenId=r.default.uniqueId("l"));s=u[i]={obj:t,objId:i,id:l,listeningTo:u,count:0}}return o(t,e,n,this,s),this},off:function(t,e,n){return this._events?(this._events=l(f,this._events,t,e,{context:n,listeners:this._listeners}),this):this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;for(var u=t?[t._listenId]:r.default.keys(i),s=0;s<u.length;s++){var l=i[u[s]];if(!l)break;l.obj.off(e,n,this)}return this},once:function(t,e,n){var i=l(d,{},t,e,r.default.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(i,e,n)},listenToOnce:function(t,e,n){var i=l(d,{},e,n,r.default.bind(this.stopListening,this,t));return this.listenTo(t,i)},trigger:function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return l(c,this._events,t,void 0,n),this}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),u=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=u.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),r=i(u),s=n(4),l=i(s),o=n(7),a=i(o),f=n(0),d=i(f),c=n(2),h=i(c),v={Events:r.default,extend:l.default,View:a.default,$:h.default};d.default.extend(v,r.default),e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=this,i=void 0;return i=t&&u.default.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},u.default.extend(i,n,e),i.prototype=u.default.create(n.prototype,t),i.prototype.constructor=i,i.__super__=n.prototype,i};var i=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(i)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var u=n(6),r=i(u),s=n(1),l=i(s),o=n(0),a=i(o),f=n(10),d=i(f),c={View:r.default,Events:l.default,createView:function(t){return r.default.extend(t)},registerViews:d.default};a.default.extend(c,l.default),t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),r=i(u),s=n(9),l=i(s),o=n(0),a=i(o),f=r.default.View.extend({isDestroyed:!1,constructor:function(t){this.render=a.default.bind(this.render,this),t=l.default._getValue(t,this),this.options=a.default.extend({},a.default.result(this,"options"),t),r.default.View.call(this,this.options)},normalizeUIKeys:function(t){var e=a.default.result(this,"_uiBindings");return l.default.normalizeUIKeys(t,e||a.default.result(this,"ui"))},normalizeUIValues:function(t,e){var n=a.default.result(this,"ui"),i=a.default.result(this,"_uiBindings");return l.default.normalizeUIValues(t,i||n,e)},bindUIElements:function(){this._bindUIElements()},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=a.default.result(this,"_uiBindings");this.ui={};var e=this;a.default.each(t,function(t,n){e.ui[n]=e.$(t)})}},unbindUIElements:function(){this._unbindUIElements()},_unbindUIElements:function(){if(this.ui&&this._uiBindings){var t=this;a.default.each(this.ui,function(e,n){delete t.ui[n]}),this.ui=this._uiBindings,delete this._uiBindings}},delegateEvents:function(t){return this._delegateDOMEvents(t),this},_delegateDOMEvents:function(t){var e=l.default._getValue(t||this.events,this);e=this.normalizeUIKeys(e),a.default.isUndefined(t)&&(this.events=e);var n={};a.default.extend(n,e),r.default.View.prototype.delegateEvents.call(this,n)},destroy:function(){return this.isDestroyed?this:(this.isDestroyed=!0,this.unbindUIElements(),this.isRendered=!1,this.remove(),this)},onRender:function(){},render:function(){return this.isRendered=!0,this.bindUIElements(),this.onRender(),this}});e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),r=i(u),s=n(1),l=i(s),o=n(4),a=i(o),f=n(2),d=i(f),c=function(t){this.cid=r.default.uniqueId("view"),r.default.extend(this,r.default.pick(t,v)),this._ensureElement(),this.initialize.apply(this,arguments)},h=/^(\S+)\s*(.*)$/,v=["el","id","attributes","className","tagName","events"];r.default.extend(c.prototype,l.default,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof d.default?t:(0,d.default)(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=r.default.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(r.default.isFunction(n)||(n=this[n]),n){var i=e.match(h);this.delegate(i[1],i[2],r.default.bind(n,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(r.default.result(this,"el"));else{var t=r.default.extend({},r.default.result(this,"attributes"));this.id&&(t.id=r.default.result(this,"id")),this.className&&(t.class=r.default.result(this,"className")),this.setElement(this._createElement(r.default.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),c.extend=a.default,e.default=c},function(t,n){t.exports=e},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),r=i(u),s=n(3),l=i(s),o=l.default.extend,a=function(t){return l.default.$.contains(document.documentElement,t)},f=function(t,e){t&&r.default.extend(this,r.default.pick(t,e))},d=function(t,e){if(t&&e)return t.options&&void 0!==t.options[e]?t.options[e]:t[e]},c=function(t){return d(this,t)},h=function(t,e,n){return r.default.isFunction(t)&&(t=n?t.apply(e,n):t.call(e)),t},v=function(t){var e=this;return r.default.reduce(t,function(t,n,i){return r.default.isFunction(n)||(n=e[n]),n&&(t[i]=n),t},{})},_=function(t,e){return t.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(t){return e[t.slice(4)]})},p=function(t,e){return r.default.reduce(t,function(t,n,i){return t[_(i,e)]=n,t},{})},g=function t(e,n,i){return r.default.each(e,function(u,s){r.default.isString(u)?e[s]=_(u,n):r.default.isObject(u)&&r.default.isArray(i)&&(r.default.extend(u,t(r.default.pick(u,i),n)),r.default.each(i,function(t){var e=u[t];r.default.isString(e)&&(u[t]=_(e,n))}))}),e};e.default={extend:o,isNodeAttached:a,mergeOptions:f,getOption:d,proxyGetOption:c,normalizeMethods:v,normalizeUIString:_,normalizeUIKeys:p,normalizeUIValues:g,_getValue:h}},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function u(){l.forEach(function(t){var e=new t;(0,s.default)(e.el).length>0&&e.render()},this)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),s=function(t){return t&&t.__esModule?t:{default:t}}(r),l=[];e.default={registerViews:function(t){l.push.apply(l,i(t)),(0,s.default)(function(){u()})}}}])});